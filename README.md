## Task description

Необходимо спроектировать и разработать небольшой сервис для генерации счетов на оплату
(инвойсов), и отправку счетов на электронную почту клиентам.

### Workflow

1. Клиент отправляет HTTP-запрос на сервис, передавая на API:
    - email-адрес, на который требуется выслать счет на оплату,
    - содержание выполненных работ, в виде списка работ и стоимости по каждому пункту.
2. Сервис логгирует входящий запрос путем создания записи в базе данных.
3. Сервис получает дополнительную информацию для генерации инвойса из базы данных, используя email как ключ для поиска:
    - информацию о клиенте (first name, last name),
    - информацию о компании, в которой работает получатель счета.
4. Сервис генерирует PDF-документ на основе шаблона. PDF включает:
    - информацию о клиенте,
    - информацию о компании клиента,
    - список выполненных работ и их стоимость,
    - общую сумму для оплаты,
    - номер инвойса,
    - дату выставления инвойса,
    - информацию об отправителе (имя, адрес, и тд).
5. Сервис отправляет PDF-документ на электронную почту, как прикрепленный файл.

### Требования к реализации (рекомендательного характера)

1. Платформа для создания сервиса — Node.js.
2. PostgreSQL в качестве сервера баз данных.
3. Отправку почты через сервис Mailgun.
4. Использовать архитектуру, основанную на очередях для выполнения асинхронных задач:
    - генерация PDF-документа,
    - отправку электронного сообщения. Для этого можно использовать систему BullMQ, https://docs.bullmq.io .
5. Для генерации PDF использовать библиотеку html-pdf-node (https://www.npmjs.com/package/html-pdf-node), html-pdf или
   любую другую.
6. Для документирования использовать сервис — Swagger (Open API).

Можно использовать любые общедоступные библиотеки, которые сочтёте нужным.
Если есть энтузиазм, желание, и время — автоматические тесты будут только плюсом.

### Примечания

1. Плюсом будет использование docker-compose для организации работы с
   инфраструктурами вещами (Postgres, Redis, etc).
2. Пример шаблона для инвойса (“красота верстки” не обязательна):
    - https://jumbotron-production-f.squarecdn.com/assets/72450bb7af7a27ac77a3.jpg
    - пример взят отсюда: https://squareup.com/us/en/townsquare/invoice-examples , see “Example invoice for
      freelancers”
3. Плюсом будет использование TypeScript
4. Тестирование работоспособности сервиса будет выполняться с помощью любого HTTP-клиента, например curl или Postman
   API Client.
5. Во время написания сервиса не стоит изобретать велосипеды, лучше взять что-то
   существующие.

### Результат работы

1. Мы хотели бы видеть результат выполнения в репозитории на GitHub. По ходу
   выполнения задания, делайте логически обоснованные атомарные коммиты.
2. В репозитории может быть готовая или промежуточная реализация тестового задания.
3. Приложите, пожалуйста, инструкцию для запуска и тестирования сервиса.
4. В репозитории также должен быть SQL-скрипт создания таблиц в базе данных.

&copy; Twelvedevs

### Run

1. Приложение доступно по следующим **url**:

    1. При запуске локально (для корректной работы, необходимо самому запустить `redis`):
        1. Swagger: [http://localhost:3001/api/swagger](http://localhost:3001/api/swagger)
    2. При запуске через `docker`:
        1. Swagger: [http://localhost:3000/api/swagger](http://localhost:3000/api/swagger)
        2. PgAdmin: [http://localhost:5050](http://localhost:5050)
        3. Redis-commander: [http://localhost:8081](http://localhost:8081)
2. Описание шагов использования:
    1. Добавить информацию о компании клиента (**POST /** `/api/company-management`).
    2. Добавить информацию о клиенте (**POST /** `/api/client-management`). Чтобы указать `companyId`, можно посмотреть
       список всех компаний (**GET /** `/api/company-management`).
    3. Добавить информацию о выполненной работе (**POST /** `/api/payment`).
    4. Сгенерировать invoice (**POST /** `/api/invoice`). Чтобы указать `paymentId`, можно посмотреть список всех
       запросов на инвойс (**GET /** `/api/payment`). Сгенерированный invoice будет сохранен локально: `./pdf-files/*.pdf`.
   
      